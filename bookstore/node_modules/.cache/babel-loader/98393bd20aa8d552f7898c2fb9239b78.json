{"remainingRequest":"D:\\code\\vue-软件工程课程设计\\bookstore\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js!D:\\code\\vue-软件工程课程设计\\bookstore\\node_modules\\_eslint-loader@2.2.1@eslint-loader\\index.js??ref--13-0!D:\\code\\vue-软件工程课程设计\\bookstore\\src\\router\\index.js","dependencies":[{"path":"D:\\code\\vue-软件工程课程设计\\bookstore\\src\\router\\index.js","mtime":1598091652980},{"path":"D:\\code\\vue-软件工程课程设计\\bookstore\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\vue-软件工程课程设计\\bookstore\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\code\\vue-软件工程课程设计\\bookstore\\node_modules\\_eslint-loader@2.2.1@eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBWdWVSb3V0ZXIgZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCBIb21lIGZyb20gJy4uL3ZpZXdzL0hvbWUudnVlJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOyAvLyDop6PlhrN2dWUtcm91dGVyIDMuMS4w5Y+K5LmL5ZCO54mI5pys77yMCi8vIOWcqOi3r+eUsei3s+i9rOaXtua1j+iniOWZqOaOp+WItuWPsOaKpeKAnFVuY2F1Z2h0IChpbiBwcm9taXNlKeKAneeahOmXrumimAoKdmFyIG9yaWdpbmFsUHVzaCA9IFZ1ZVJvdXRlci5wcm90b3R5cGUucHVzaDsKClZ1ZVJvdXRlci5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIHB1c2gobG9jYXRpb24sIG9uUmVzb2x2ZSwgb25SZWplY3QpIHsKICBpZiAob25SZXNvbHZlIHx8IG9uUmVqZWN0KSByZXR1cm4gb3JpZ2luYWxQdXNoLmNhbGwodGhpcywgbG9jYXRpb24sIG9uUmVzb2x2ZSwgb25SZWplY3QpOwogIHJldHVybiBvcmlnaW5hbFB1c2guY2FsbCh0aGlzLCBsb2NhdGlvbikuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgcmV0dXJuIGVycjsKICB9KTsKfTsKClZ1ZS51c2UoVnVlUm91dGVyKTsKdmFyIHJvdXRlcyA9IFt7CiAgcGF0aDogJy8nLAogIHJlZGlyZWN0OiB7CiAgICBuYW1lOiAnaG9tZScKICB9Cn0sIHsKICBwYXRoOiAnL2hvbWUnLAogIG5hbWU6ICdob21lJywKICBtZXRhOiB7CiAgICB0aXRsZTogJ+mmlumhtScKICB9LAogIGNvbXBvbmVudDogSG9tZQp9LCB7CiAgcGF0aDogJy9uZXdCb29rcycsCiAgbmFtZTogJ25ld0Jvb2tzJywKICBtZXRhOiB7CiAgICB0aXRsZTogJ+aWsOS5puS4iuW4gicKICB9LAogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgnLi4vY29tcG9uZW50cy9Cb29rc05ldy52dWUnKTsKICB9Cn0sIHsKICBwYXRoOiAnL2NhdGVnb3J5LzppZCcsCiAgbmFtZTogJ2NhdGVnb3J5JywKICBtZXRhOiB7CiAgICB0aXRsZTogJ+WbvuS5puWIhuexuycKICB9LAogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgnLi4vdmlld3MvQm9va3MudnVlJyk7CiAgfQp9LCB7CiAgcGF0aDogJy9zZWFyY2gnLAogIG5hbWU6ICdzZWFyY2gnLAogIG1ldGE6IHsKICAgIHRpdGxlOiAn5pCc57Si57uT5p6cJwogIH0sCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KCcuLi92aWV3cy9Cb29rcy52dWUnKTsKICB9Cn0sIHsKICBwYXRoOiAnL2Jvb2svOmlkJywKICBuYW1lOiAnYm9vaycsCiAgbWV0YTogewogICAgdGl0bGU6ICflm77kuaYnCiAgfSwKICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgIHJldHVybiBpbXBvcnQoJy4uL3ZpZXdzL0Jvb2sudnVlJyk7CiAgfQp9LCB7CiAgcGF0aDogJy9jYXJ0JywKICBuYW1lOiAnY2FydCcsCiAgbWV0YTogewogICAgdGl0bGU6ICfotK3nianovaYnCiAgfSwKICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgIHJldHVybiBpbXBvcnQoJy4uL3ZpZXdzL1Nob3BwaW5nQ2FydC52dWUnKTsKICB9Cn0sIHsKICBwYXRoOiAnL3JlZ2lzdGVyJywKICBuYW1lOiAncmVnaXN0ZXInLAogIG1ldGE6IHsKICAgIHRpdGxlOiAn5rOo5YaMJwogIH0sCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KCcuLi9jb21wb25lbnRzL1VzZXJSZWdpc3Rlci52dWUnKTsKICB9CiAgLyogd2VicGFja0NodW5rTmFtZTogInVzZXIiICovCgp9LCB7CiAgcGF0aDogJy9sb2dpbicsCiAgbmFtZTogJ2xvZ2luJywKICBtZXRhOiB7CiAgICB0aXRsZTogJ+eZu+W9lScKICB9LAogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgnLi4vY29tcG9uZW50cy9Vc2VyTG9naW4udnVlJyk7CiAgfQogIC8qIHdlYnBhY2tDaHVua05hbWU6ICJ1c2VyIiAqLwoKfSwgewogIHBhdGg6ICcvY2hlY2snLAogIG5hbWU6ICdjaGVjaycsCiAgbWV0YTogewogICAgdGl0bGU6ICfnu5PnrpcnLAogICAgcmVxdWlyZXNBdXRoOiB0cnVlCiAgfSwKICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgIHJldHVybiBpbXBvcnQoJy4uL3ZpZXdzL0NoZWNrb3V0LnZ1ZScpOwogIH0KfV07CnZhciByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKHsKICBtb2RlOiAnaGlzdG9yeScsCiAgYmFzZTogcHJvY2Vzcy5lbnYuQkFTRV9VUkwsCiAgLy9iYXNlOiAiL2Jvb2tzdG9yZSIsCiAgcm91dGVzOiByb3V0ZXMKfSk7CnJvdXRlci5iZWZvcmVFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkgewogIC8vIOWIpOaWreivpei3r+eUseaYr+WQpumcgOimgeeZu+W9leadg+mZkAogIGlmICh0by5tYXRjaGVkLnNvbWUoZnVuY3Rpb24gKHJlY29yZCkgewogICAgcmV0dXJuIHJlY29yZC5tZXRhLnJlcXVpcmVzQXV0aDsKICB9KSkgewogICAgLy8g6Lev55Sx6ZyA6KaB6aqM6K+B77yM5Yik5pat55So5oi35piv5ZCm5bey57uP55m75b2VCiAgICBpZiAoc3RvcmUuc3RhdGUudXNlci51c2VyKSB7CiAgICAgIG5leHQoKTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQoewogICAgICAgIHBhdGg6ICcvbG9naW4nLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICByZWRpcmVjdDogdG8uZnVsbFBhdGgKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0gZWxzZSBuZXh0KCk7Cn0pOyAvLyDorr7nva7pobXpnaLnmoTmoIfpopgKCnJvdXRlci5hZnRlckVhY2goZnVuY3Rpb24gKHRvKSB7CiAgZG9jdW1lbnQudGl0bGUgPSB0by5tZXRhLnRpdGxlOwp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["D:/code/vue-软件工程课程设计/bookstore/src/router/index.js"],"names":["Vue","VueRouter","Home","store","originalPush","prototype","push","location","onResolve","onReject","call","catch","err","use","routes","path","redirect","name","meta","title","component","requiresAuth","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","matched","some","record","state","user","query","fullPath","afterEach","document"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport Home from '../views/Home.vue'\r\nimport store from '@/store'\r\n\r\n// 解决vue-router 3.1.0及之后版本，\r\n// 在路由跳转时浏览器控制台报“Uncaught (in promise)”的问题\r\nconst originalPush = VueRouter.prototype.push\r\nVueRouter.prototype.push = function push(location, onResolve, onReject) {\r\n  if (onResolve || onReject) \r\n    return originalPush.call(this, location, onResolve, onReject)\r\n  return originalPush.call(this, location).catch(err => err)\r\n}\r\n\r\nVue.use(VueRouter)\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    redirect: {\r\n      name: 'home'\r\n    }\r\n  },\r\n  {\r\n    path: '/home',\r\n    name: 'home',\r\n    meta: {\r\n      title: '首页'\r\n    },\r\n    component: Home\r\n  },\r\n  {\r\n    path: '/newBooks',\r\n    name: 'newBooks',\r\n    meta: {\r\n      title: '新书上市'\r\n    },\r\n    component: () => import('../components/BooksNew.vue')\r\n  },\r\n  {\r\n    path: '/category/:id',\r\n    name: 'category',\r\n    meta: {\r\n      title: '图书分类'\r\n    },\r\n    component: () => import('../views/Books.vue')\r\n  },\r\n  {\r\n    path: '/search',\r\n    name: 'search',\r\n    meta: {\r\n      title: '搜索结果'\r\n    },\r\n    component: () => import('../views/Books.vue')\r\n  },\r\n  {\r\n    path: '/book/:id',\r\n    name: 'book',\r\n    meta: {\r\n      title: '图书'\r\n    },\r\n    component: () => import('../views/Book.vue')\r\n  },\r\n  {\r\n    path: '/cart',\r\n    name: 'cart',\r\n    meta: {\r\n      title: '购物车'\r\n    },\r\n    component: () => import('../views/ShoppingCart.vue')\r\n  },\r\n  {\r\n    path: '/register',\r\n    name: 'register',\r\n    meta: {\r\n      title: '注册'\r\n    },\r\n    component: () => import('../components/UserRegister.vue') /* webpackChunkName: \"user\" */\r\n  },\r\n  {\r\n    path: '/login',\r\n    name: 'login',\r\n    meta: {\r\n      title: '登录'\r\n    },\r\n    component: () => import('../components/UserLogin.vue') /* webpackChunkName: \"user\" */\r\n  },\r\n  {\r\n    path: '/check',\r\n    name: 'check',\r\n    meta: {\r\n      title: '结算',\r\n      requiresAuth: true\r\n    },\r\n    component: () => import('../views/Checkout.vue')\r\n  }\r\n]\r\n\r\nconst router = new VueRouter({\r\n  mode: 'history',\r\n  base: process.env.BASE_URL,\r\n  //base: \"/bookstore\",\r\n  routes,\r\n})\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  // 判断该路由是否需要登录权限\r\n  if (to.matched.some(record => record.meta.requiresAuth))\r\n  {\r\n    // 路由需要验证，判断用户是否已经登录\r\n    if(store.state.user.user){\r\n      next(); \r\n    }\r\n    else{\r\n      next({\r\n        path: '/login',\r\n        query: {redirect: to.fullPath}\r\n      });\r\n    }\r\n  }\r\n  else\r\n    next();\r\n})\r\n\r\n// 设置页面的标题\r\nrouter.afterEach((to) => {\r\n  document.title = to.meta.title;\r\n})\r\n\r\nexport default router\r\n"]}]}