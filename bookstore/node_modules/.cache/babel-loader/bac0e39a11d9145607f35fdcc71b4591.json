{"remainingRequest":"D:\\code\\vue-软件工程课程设计\\bookstore\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js!D:\\code\\vue-软件工程课程设计\\bookstore\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js??ref--0-0!D:\\code\\vue-软件工程课程设计\\bookstore\\node_modules\\_vue-loader@15.9.3@vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\vue-软件工程课程设计\\bookstore\\src\\views\\Books.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\vue-软件工程课程设计\\bookstore\\src\\views\\Books.vue","mtime":1598091653007},{"path":"D:\\code\\vue-软件工程课程设计\\bookstore\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\vue-软件工程课程设计\\bookstore\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\code\\vue-软件工程课程设计\\bookstore\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\vue-软件工程课程设计\\bookstore\\node_modules\\_vue-loader@15.9.3@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEJvb2tMaXN0IGZyb20gIkAvY29tcG9uZW50cy9Cb29rTGlzdCI7CmltcG9ydCBMb2FkaW5nIGZyb20gJ0AvY29tcG9uZW50cy9Mb2FkaW5nLnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQm9va3MnLAogIHByb3BzOiBbJyddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0aXRsZTogJycsCiAgICAgIGJvb2tzOiBbXSwKICAgICAgbWVzc2FnZTogJycsCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIHRvdGFsOiA1LAogICAgICBwYWdlTnVtOiAxLAogICAgICBwYWdlU2l6ZTogMgogICAgfTsKICB9LAogIGJlZm9yZVJvdXRlRW50ZXI6IGZ1bmN0aW9uIGJlZm9yZVJvdXRlRW50ZXIodG8sIGZyb20sIG5leHQpIHsKICAgIG5leHQoZnVuY3Rpb24gKHZtKSB7CiAgICAgIHZtLnRpdGxlID0gdG8ubWV0YS50aXRsZTsKICAgICAgdmFyIHVybCA9IHZtLnNldFJlcXVlc3RVcmwodG8uZnVsbFBhdGgpOwogICAgICB2bS5nZXRCb29rcyh1cmwsIHZtLnBhZ2VOdW0sIHZtLnBhZ2VTaXplKTsKICAgIH0pOwogIH0sCiAgYmVmb3JlUm91dGVVcGRhdGU6IGZ1bmN0aW9uIGJlZm9yZVJvdXRlVXBkYXRlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgdXJsID0gdGhpcy5zZXRSZXF1ZXN0VXJsKHRvLmZ1bGxQYXRoKTsKICAgIHRoaXMuZ2V0Qm9va3ModXJsLCB0aGlzLnBhZ2VOdW0sIHRoaXMucGFnZVNpemUpOwogICAgbmV4dCgpOwogIH0sCiAgY29tcG9uZW50czogewogICAgQm9va0xpc3Q6IEJvb2tMaXN0LAogICAgTG9hZGluZzogTG9hZGluZwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0Qm9va3M6IGZ1bmN0aW9uIGdldEJvb2tzKHVybCwgcGFnZU51bSwgcGFnZVNpemUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMubWVzc2FnZSA9ICcnOwogICAgICB0aGlzLmF4aW9zLmdldCh1cmwsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHBhZ2VOdW06IHBhZ2VOdW0sCiAgICAgICAgICBwYWdlU2l6ZTogcGFnZVNpemUKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PSAyMDApIHsKICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIF90aGlzLmJvb2tzID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgICAgX3RoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsOwoKICAgICAgICAgIGlmIChfdGhpcy5ib29rcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgaWYgKF90aGlzLiRyb3V0ZS5uYW1lID09PSAiY2F0ZWdvcnkiKSBfdGhpcy5tZXNzYWdlID0gIuW9k+WJjeWIhuexu+S4i+ayoeacieWbvuS5pu+8gSI7ZWxzZSBfdGhpcy5tZXNzYWdlID0gIuayoeacieaQnOe0ouWIsOWMuemFjeeahOWbvuS5pu+8gSI7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZXR1cm4gYWxlcnQoZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliqjmgIHorr7nva7mnI3liqHnq6/mlbDmja7mjqXlj6PnmoTor7fmsYJVUkwKICAgIHNldFJlcXVlc3RVcmw6IGZ1bmN0aW9uIHNldFJlcXVlc3RVcmwocGF0aCkgewogICAgICB2YXIgdXJsID0gcGF0aDsKCiAgICAgIGlmIChwYXRoLmluZGV4T2YoIi9jYXRlZ29yeSIpICE9IC0xKSB7CiAgICAgICAgdXJsID0gIi9ib29rIiArIHVybCArICIvcGFnZSI7CiAgICAgIH0KCiAgICAgIHJldHVybiB1cmw7CiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlU2l6ZUNoYW5nZShzZWxlY3RlZFNpemUpIHsKICAgICAgdGhpcy5wYWdlU2l6ZSA9IHNlbGVjdGVkU2l6ZTsgLy9jb25zb2xlLmxvZyh0aGlzLnBhZ2VTaXplKSAvL+avj+mhteS4i+aLieaYvuekuuaVsOaNruadoeaVsAoKICAgICAgdmFyIHVybCA9IHRoaXMuc2V0UmVxdWVzdFVybCh0aGlzLiRyb3V0ZS5mdWxsUGF0aCk7CiAgICAgIHRoaXMuZ2V0Qm9va3ModXJsLCB0aGlzLnBhZ2VOdW0sIHRoaXMucGFnZVNpemUpOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUN1cnJlbnRDaGFuZ2UoY3VycmVudFBhZ2UpIHsKICAgICAgdGhpcy5wYWdlTnVtID0gY3VycmVudFBhZ2U7CiAgICAgIHZhciB1cmwgPSB0aGlzLnNldFJlcXVlc3RVcmwodGhpcy4kcm91dGUuZnVsbFBhdGgpOyAvLyBjb25zb2xlLmxvZyhjdXJyZW50UGFnZSkgLy/ngrnlh7vnrKzlh6DpobUKCiAgICAgIHRoaXMuZ2V0Qm9va3ModXJsLCB0aGlzLnBhZ2VOdW0sIHRoaXMucGFnZVNpemUpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Books.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <Loading v-if=\"loading\" />\r\n    <h3 v-else>{{ title }}</h3>\r\n    <BookList :list = \"books\"/>\r\n    <h1>{{ message }}</h1>\r\n    <el-pagination \r\n      :hide-on-single-page=\"true\"\r\n      @size-change=\"handleSizeChange\" \r\n      :page-sizes=\"[2, 3, 10, 20]\" \r\n      @current-change=\"handleCurrentChange\" \r\n      :current-page=\"pageNum\" \r\n      :page-size=\"pageSize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\" \r\n      :total=\"total\">\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import BookList from \"@/components/BookList\"\r\n  import Loading from '@/components/Loading.vue'\r\n  export default {\r\n    name:'Books',\r\n    props:[''],\r\n    data () {\r\n      return {\r\n        title: '',\r\n        books: [],\r\n        message: '',\r\n        loading: true,\r\n        total: 5,\r\n        pageNum: 1,\r\n        pageSize: 2\r\n      };\r\n    },\r\n\r\n    beforeRouteEnter(to, from, next){\r\n      next(vm => {\r\n        vm.title = to.meta.title;\r\n        let url = vm.setRequestUrl(to.fullPath);\r\n        vm.getBooks(url, vm.pageNum, vm.pageSize);\r\n      });\r\n    },\r\n    beforeRouteUpdate(to, from, next){\r\n      let url = this.setRequestUrl(to.fullPath);\r\n      this.getBooks(url, this.pageNum, this.pageSize);\r\n      next();\r\n    },\r\n\r\n    components: {\r\n      BookList,\r\n      Loading\r\n    },\r\n\r\n    methods: {\r\n      getBooks(url, pageNum, pageSize){\r\n        this.message = '';\r\n        this.axios.get(url, {params: {pageNum, pageSize}})\r\n          .then(response => {\r\n            if(response.data.code == 200){\r\n              this.loading = false;\r\n              this.books = response.data.data;\r\n              this.total = response.data.total;\r\n              if(this.books.length === 0){\r\n                if(this.$route.name === \"category\")\r\n                  this.message = \"当前分类下没有图书！\"\r\n                else\r\n                  this.message = \"没有搜索到匹配的图书！\"\r\n              }\r\n            }\r\n          })\r\n          .catch(error => alert(error));\r\n      },\r\n      // 动态设置服务端数据接口的请求URL\r\n      setRequestUrl(path){\r\n        let url = path;\r\n        if(path.indexOf(\"/category\") != -1){\r\n          url = \"/book\" + url + \"/page\";\r\n        }\r\n        return url;\r\n      },\r\n      handleSizeChange(selectedSize) {\r\n            this.pageSize = selectedSize;\r\n            //console.log(this.pageSize) //每页下拉显示数据条数\r\n            let url = this.setRequestUrl(this.$route.fullPath);\r\n            this.getBooks(url, this.pageNum, this.pageSize);\r\n        },\r\n\r\n      handleCurrentChange(currentPage) {\r\n          this.pageNum = currentPage\r\n          let url = this.setRequestUrl(this.$route.fullPath);\r\n          // console.log(currentPage) //点击第几页\r\n          this.getBooks(url, this.pageNum, this.pageSize)\r\n      },\r\n    }\r\n  }\r\n</script>\r\n<style scoped>\r\n\r\n</style>"],"sourceRoot":"src/views"}]}